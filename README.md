This is a basic concept for Django + Vue SPA with strong authentication.


1. The "default page" is a Django TemplateView. We configure the TEMPLATES setting in Django to point to the directory containing the index.html under "dist", i.e. the file generated by Vue.
2. Because everything is served under Django, it means we can make use of Http only cookies, CSRF etc. This ensures we can use battle-hardened SSR techniques and avoid complex and potentially insecure solutions such as storing auth tokens in localStorage.
3. One disadvantage: hot reload is hard to set up with this technique. Instead we have set up vue to just compile when a file is changed (i.e. watch). Not as slick but fast enough for development.
4. Another advantage of using a Django view/template is that we can inject data into the template. For example, in a "pure" SPA you would first a) check if an auth token is in localStorage, then call an API endpoint to fetch the user data. This way, the user data (i.e. current auth user) is simply serialized into a JSON snippet on server load, and is immediately available to our Vue app (so we can just add it to the Vuex store).
5. Auth API: this is a problem, because most DRF auth packages e.g. djoser assume an auth token, and Django's default auth views are SSR only. Django-allauth supports AJAX, but does some annoying things like injecting the form HTML into the JSON. To get around this we have a simple adapter class that returns pure JSON. Another point is that all-auth parses form not JSON data i.e. content type has to be multipart/form-data or application/x-encoded, as with a normal Django form.

